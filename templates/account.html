<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>
    {{ 'Login' if page == 'login' else 'Register' }} - LiMoney Tracker
  </title>

  <link rel="stylesheet" href="{{ url_for('static', filename='design.css') }}" />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@500;600;700&display=swap"
    rel="stylesheet" />

  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}" />
  <meta name="theme-color" content="#3b82f6" />
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/icon-512.png') }}" />

  <script>
    // Only register the Service Worker if we are NOT on localhost
    if (
      window.location.hostname !== "127.0.0.1" &&
      window.location.hostname !== "localhost"
    ) {
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/sw.js")
            .then((reg) =>
              console.log("Service Worker Registered!", reg.scope),
            )
            .catch((err) => console.log("Service Worker Failed:", err));
        });
      }
    } else {
      console.log("Service Worker skipped on Localhost");
    }
  </script>
</head>

<body class="auth-body">
  <div class="auth-wrapper">
    <div class="auth-visual">
      <div class="visual-content">
        <h1 class="brand-logo">üí∞ LiMoney</h1>
        <p class="brand-quote">"Master your money, master your life."</p>
        <div class="visual-glass-card">
          <p>Track Savings ‚Ä¢ Manage Debts ‚Ä¢ Plan Budgets</p>
        </div>
      </div>
    </div>

    <div class="auth-form-container">
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %}
      <div class="flash-wrapper">
        {% for category, message in messages %}
        <div class="flash-message {{ category }}">
          <span>{{ message }}</span>
        </div>
        {% endfor %}
      </div>
      {% endif %} {% endwith %}

      <div class="form-content">
        {% if page == 'login' %}
        <div class="auth-header">
          <h2>Welcome Back!</h2>
          <p class="auth-subtitle">Please enter your details to sign in.</p>
        </div>

        <form method="POST" action="{{ url_for('login') }}" class="auth-form">
          <div class="input-group">
            <label class="input-label">Username</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              <input type="text" name="username" class="auth-input" placeholder="Enter your username" required />
            </div>
          </div>

          <div class="input-group">
            <label class="input-label">Password</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              <input type="password" name="password" id="password" class="auth-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
              <button type="button" class="toggle-password" onclick="togglePassword('password')">
                üëÅÔ∏è
              </button>
            </div>
          </div>

          <button type="submit" class="auth-button">Sign In</button>
        </form>

        <p class="switch-link">
          New to LiMoney?
          <a href="{{ url_for('register') }}">Create an account</a>
        </p>
        {% endif %} {% if page == 'register' %}
        <div class="auth-header">
          <h2>Create Account</h2>
          <p class="auth-subtitle">
            Start your journey to financial freedom.
          </p>
        </div>

        <form method="POST" action="{{ url_for('register') }}" class="auth-form">
          <div class="input-group">
            <label class="input-label">Username</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              <input type="text" name="username" class="auth-input" placeholder="Choose a username" required />
            </div>
          </div>

          <div class="input-group">
            <label class="input-label">Email Address</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
              <input type="email" name="email" class="auth-input" placeholder="name@example.com" required />
            </div>
          </div>

          <div class="input-group">
            <label class="input-label">Password</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              <input type="password" name="password" id="reg_pass" class="auth-input" placeholder="Create a password"
                required />
              <button type="button" class="toggle-password" onclick="togglePassword('reg_pass')">
                üëÅÔ∏è
              </button>
            </div>
          </div>

          <div class="input-group">
            <label class="input-label">Confirm Password</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              <input type="password" name="confirm_password" id="reg_confirm" class="auth-input"
                placeholder="Confirm password" required />
            </div>
          </div>

          <button type="submit" class="auth-button">Sign Up</button>
        </form>

        <p class="switch-link">
          Already have an account? <a href="{{ url_for('login') }}">Log in</a>
        </p>
        {% endif %}
      </div>
    </div>
  </div>

  <script>
    function togglePassword(fieldId) {
      const input = document.getElementById(fieldId);
      input.type = input.type === \"password\" ? \"text\" : \"password\";
    }
  </script>
</body>

</html> 